---
import { Icon } from '@astrojs/starlight/components';
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';

const { entry } = Astro.locals.starlightRoute;
const metadata = entry?.data || {};

// Debug information
console.log('Entry data:', metadata);
console.log('Author:', metadata.author);
console.log('Publication date:', metadata.pubDate);
---

<StarlightPage {...Astro.props}>
  {metadata.author || metadata.pubDate ? (
    <div class="sl-page-meta">
      {metadata.author && (
        <div class="sl-page-author">
          <Icon name="user" />
          <span>{metadata.author}</span>
        </div>
      )}
      {metadata.pubDate && (
        <div class="sl-page-date">
          <Icon name="calendar" />
          <time datetime={metadata.pubDate.toISOString()}>
            {metadata.pubDate.toLocaleDateString('zh-CN', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </time>
        </div>
      )}
    </div>
  ) : null}
  <slot />
</StarlightPage>

<style>
  .sl-page-meta {
    display: flex;
    gap: 1.5rem;
    margin: 1rem 0 2rem;
    color: var(--sl-color-gray-3);
    font-size: 0.9rem;
  }

  .sl-page-author,
  .sl-page-date {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .sl-page-author :global(svg),
  .sl-page-date :global(svg) {
    width: 1rem;
    height: 1rem;
  }
</style> 
